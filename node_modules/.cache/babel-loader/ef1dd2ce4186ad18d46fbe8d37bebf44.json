{"remainingRequest":"C:\\Users\\25974\\Desktop\\EMS\\EMS_vue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\25974\\Desktop\\EMS\\EMS_vue\\src\\utils\\menus.js","dependencies":[{"path":"C:\\Users\\25974\\Desktop\\EMS\\EMS_vue\\src\\utils\\menus.js","mtime":1650116209923},{"path":"C:\\Users\\25974\\Desktop\\EMS\\EMS_vue\\babel.config.js","mtime":1640757948772},{"path":"C:\\Users\\25974\\Desktop\\EMS\\EMS_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\25974\\Desktop\\EMS\\EMS_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIkM6L1VzZXJzLzI1OTc0L0Rlc2t0b3AvRU1TL0VNU192dWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zdGFydHMtd2l0aC5qcyI7CmltcG9ydCB7IGdldFJlcXVlc3QgfSBmcm9tICIuL2FwaSI7CmV4cG9ydCB2YXIgaW5pdE1lbnUgPSBmdW5jdGlvbiBpbml0TWVudShyb3V0ZXIsIHN0b3JlKSB7CiAgaWYgKHN0b3JlLnN0YXRlLnJvdXRlcy5sZW5ndGggPiAwKSB7CiAgICByZXR1cm47CiAgfQoKICBnZXRSZXF1ZXN0KCIvc3lzdGVtL2NmZy9tZW51IikudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgaWYgKGRhdGEpIHsKICAgICAgLy8gIOagvOW8j+WMllJvdXRlcgogICAgICB2YXIgZm10Um91dGVzID0gZm9ybWF0Um91dGVzKGRhdGEpOyAvLyDmt7vliqDliLDot6/nlLEKCiAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihmbXRSb3V0ZXMpLAogICAgICAgICAgX3N0ZXA7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgeCA9IF9zdGVwLnZhbHVlOwogICAgICAgICAgcm91dGVyLmFkZFJvdXRlKHgpOwogICAgICAgIH0gLy/lsIbmlbDmja7lrZjlhaV2dWV4CgogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgIH0KCiAgICAgIHN0b3JlLmNvbW1pdCgnaW5pdFJvdXRlcycsIGZtdFJvdXRlcyk7CiAgICAgIHN0b3JlLmRpc3BhdGNoKCdjb25uZWN0Jyk7CiAgICB9CiAgfSk7Cn07IC8vICByb3V0ZXPmmK/ku47lkI7nq6/mjqXmlLbov4fmnaXnmoRkYXRh5pWw5o2uCgpleHBvcnQgdmFyIGZvcm1hdFJvdXRlcyA9IGZ1bmN0aW9uIGZvcm1hdFJvdXRlcyhyb3V0ZXMpIHsKICB2YXIgZm10Um91dGVzID0gW107CiAgcm91dGVzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgIHZhciBwYXRoID0gaXRlbS5wYXRoLAogICAgICAgIF9jb21wb25lbnQgPSBpdGVtLmNvbXBvbmVudCwKICAgICAgICBuYW1lID0gaXRlbS5uYW1lLAogICAgICAgIGljb25DbHMgPSBpdGVtLmljb25DbHMsCiAgICAgICAgY2hpbGRyZW4gPSBpdGVtLmNoaWxkcmVuOwoKICAgIGlmIChjaGlsZHJlbiAmJiBjaGlsZHJlbiBpbnN0YW5jZW9mIEFycmF5KSB7CiAgICAgIC8vIOmAkuW9kgogICAgICBjaGlsZHJlbiA9IGZvcm1hdFJvdXRlcyhjaGlsZHJlbik7CiAgICB9CgogICAgdmFyIGZtUm91dGVyID0gewogICAgICBwYXRoOiBwYXRoLAogICAgICBuYW1lOiBuYW1lLAogICAgICBpY29uQ2xzOiBpY29uQ2xzLAogICAgICBjaGlsZHJlbjogY2hpbGRyZW4sCiAgICAgIGNvbXBvbmVudDogZnVuY3Rpb24gY29tcG9uZW50KHJlc29sdmUpIHsKICAgICAgICBpZiAoX2NvbXBvbmVudC5zdGFydHNXaXRoKCdIb21lJykpIHsKICAgICAgICAgIHJlcXVpcmUoWycuLi92aWV3cy8nICsgX2NvbXBvbmVudCArICcudnVlJ10sIHJlc29sdmUpOwogICAgICAgIH0gZWxzZSBpZiAoX2NvbXBvbmVudC5zdGFydHNXaXRoKCdFbXAnKSkgewogICAgICAgICAgcmVxdWlyZShbJy4uL3ZpZXdzL2VtcC8nICsgX2NvbXBvbmVudCArICcudnVlJ10sIHJlc29sdmUpOwogICAgICAgIH0gLy8gIGVsc2UgaWYgKGNvbXBvbmVudC5zdGFydHNXaXRoKCdQZXInKSkgewogICAgICAgIC8vICAgICByZXF1aXJlKFsnLi4vdmlld3MvcGVyLycgKyBjb21wb25lbnQgKyAnLnZ1ZSddLCByZXNvbHZlKTsKICAgICAgICAvLyB9IAogICAgICAgIGVsc2UgaWYgKF9jb21wb25lbnQuc3RhcnRzV2l0aCgnU2FsJykpIHsKICAgICAgICAgIHJlcXVpcmUoWycuLi92aWV3cy9zYWwvJyArIF9jb21wb25lbnQgKyAnLnZ1ZSddLCByZXNvbHZlKTsKICAgICAgICB9IC8vIGVsc2UgaWYgKGNvbXBvbmVudC5zdGFydHNXaXRoKCdTdGEnKSkgewogICAgICAgIC8vICAgICByZXF1aXJlKFsnLi4vdmlld3Mvc3RhLycgKyBjb21wb25lbnQgKyAnLnZ1ZSddLCByZXNvbHZlKTsKICAgICAgICAvLyB9IAogICAgICAgIGVsc2UgaWYgKF9jb21wb25lbnQuc3RhcnRzV2l0aCgnU3lzJykpIHsKICAgICAgICAgIHJlcXVpcmUoWycuLi92aWV3cy9zeXMvJyArIF9jb21wb25lbnQgKyAnLnZ1ZSddLCByZXNvbHZlKTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgICBmbXRSb3V0ZXMucHVzaChmbVJvdXRlcik7CiAgfSk7CiAgcmV0dXJuIGZtdFJvdXRlczsKfTs="},{"version":3,"sources":["C:/Users/25974/Desktop/EMS/EMS_vue/src/utils/menus.js"],"names":["getRequest","initMenu","router","store","state","routes","length","then","data","fmtRoutes","formatRoutes","x","addRoute","commit","dispatch","forEach","item","path","component","name","iconCls","children","Array","fmRouter","resolve","startsWith","require","push"],"mappings":";;;;AAAA,SAASA,UAAT,QAA2B,OAA3B;AAEA,OAAO,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACC,MAAD,EAASC,KAAT,EAAmB;AACvC,MAAIA,KAAK,CAACC,KAAN,CAAYC,MAAZ,CAAmBC,MAAnB,GAA4B,CAAhC,EAAmC;AAC/B;AACH;;AACDN,EAAAA,UAAU,CAAC,kBAAD,CAAV,CAA+BO,IAA/B,CAAoC,UAAAC,IAAI,EAAI;AACxC,QAAIA,IAAJ,EAAU;AACN;AACA,UAAIC,SAAS,GAAGC,YAAY,CAACF,IAAD,CAA5B,CAFM,CAGN;;AAHM,iDAIQC,SAJR;AAAA;;AAAA;AAIN,4DAAyB;AAAA,cAAhBE,CAAgB;AACrBT,UAAAA,MAAM,CAACU,QAAP,CAAgBD,CAAhB;AACH,SANK,CAON;;AAPM;AAAA;AAAA;AAAA;AAAA;;AAQNR,MAAAA,KAAK,CAACU,MAAN,CAAa,YAAb,EAA2BJ,SAA3B;AACAN,MAAAA,KAAK,CAACW,QAAN,CAAe,SAAf;AACH;AACJ,GAZD;AAaH,CAjBM,C,CAmBP;;AACA,OAAO,IAAMJ,YAAY,GAAG,SAAfA,YAAe,CAACL,MAAD,EAAY;AACpC,MAAII,SAAS,GAAG,EAAhB;AACAJ,EAAAA,MAAM,CAACU,OAAP,CAAe,UAAAC,IAAI,EAAI;AACnB,QACIC,IADJ,GAMID,IANJ,CACIC,IADJ;AAAA,QAEIC,UAFJ,GAMIF,IANJ,CAEIE,SAFJ;AAAA,QAGIC,IAHJ,GAMIH,IANJ,CAGIG,IAHJ;AAAA,QAIIC,OAJJ,GAMIJ,IANJ,CAIII,OAJJ;AAAA,QAKIC,QALJ,GAMIL,IANJ,CAKIK,QALJ;;AAOA,QAAIA,QAAQ,IAAIA,QAAQ,YAAYC,KAApC,EAA2C;AACvC;AACAD,MAAAA,QAAQ,GAAGX,YAAY,CAACW,QAAD,CAAvB;AACH;;AACD,QAAIE,QAAQ,GAAG;AACXN,MAAAA,IAAI,EAAEA,IADK;AAEXE,MAAAA,IAAI,EAAEA,IAFK;AAGXC,MAAAA,OAAO,EAAEA,OAHE;AAIXC,MAAAA,QAAQ,EAAEA,QAJC;AAKXH,MAAAA,SALW,qBAKDM,OALC,EAKQ;AACf,YAAIN,UAAS,CAACO,UAAV,CAAqB,MAArB,CAAJ,EAAkC;AAC9BC,UAAAA,OAAO,CAAC,CAAC,cAAcR,UAAd,GAA0B,MAA3B,CAAD,EAAqCM,OAArC,CAAP;AACH,SAFD,MAEO,IAAIN,UAAS,CAACO,UAAV,CAAqB,KAArB,CAAJ,EAAiC;AACpCC,UAAAA,OAAO,CAAC,CAAC,kBAAkBR,UAAlB,GAA8B,MAA/B,CAAD,EAAyCM,OAAzC,CAAP;AACH,SAFM,CAGP;AACA;AACA;AALO,aAMF,IAAIN,UAAS,CAACO,UAAV,CAAqB,KAArB,CAAJ,EAAiC;AAClCC,UAAAA,OAAO,CAAC,CAAC,kBAAkBR,UAAlB,GAA8B,MAA/B,CAAD,EAAyCM,OAAzC,CAAP;AACH,SAFI,CAGL;AACA;AACA;AALK,aAMA,IAAIN,UAAS,CAACO,UAAV,CAAqB,KAArB,CAAJ,EAAiC;AAClCC,UAAAA,OAAO,CAAC,CAAC,kBAAkBR,UAAlB,GAA8B,MAA/B,CAAD,EAAyCM,OAAzC,CAAP;AACH;AACJ;AAvBU,KAAf;AAyBAf,IAAAA,SAAS,CAACkB,IAAV,CAAeJ,QAAf;AACH,GAtCD;AAuCA,SAAOd,SAAP;AACH,CA1CM","sourcesContent":["import { getRequest } from \"./api\";\r\n\r\nexport const initMenu = (router, store) => {\r\n    if (store.state.routes.length > 0) {\r\n        return;\r\n    }\r\n    getRequest(\"/system/cfg/menu\").then(data => {\r\n        if (data) {\r\n            //  格式化Router\r\n            let fmtRoutes = formatRoutes(data);\r\n            // 添加到路由\r\n            for (let x of fmtRoutes) {\r\n                router.addRoute(x)\r\n            }\r\n            //将数据存入vuex\r\n            store.commit('initRoutes', fmtRoutes);\r\n            store.dispatch('connect');\r\n        }\r\n    })\r\n}\r\n\r\n//  routes是从后端接收过来的data数据\r\nexport const formatRoutes = (routes) => {\r\n    let fmtRoutes = [];\r\n    routes.forEach(item => {\r\n        let {\r\n            path,\r\n            component,\r\n            name,\r\n            iconCls,\r\n            children\r\n        } = item;\r\n        if (children && children instanceof Array) {\r\n            // 递归\r\n            children = formatRoutes(children);\r\n        }\r\n        let fmRouter = {\r\n            path: path,\r\n            name: name,\r\n            iconCls: iconCls,\r\n            children: children,\r\n            component(resolve) {\r\n                if (component.startsWith('Home')) {\r\n                    require(['../views/' + component + '.vue'], resolve);\r\n                } else if (component.startsWith('Emp')) {\r\n                    require(['../views/emp/' + component + '.vue'], resolve);\r\n                }\r\n                //  else if (component.startsWith('Per')) {\r\n                //     require(['../views/per/' + component + '.vue'], resolve);\r\n                // } \r\n                else if (component.startsWith('Sal')) {\r\n                    require(['../views/sal/' + component + '.vue'], resolve);\r\n                } \r\n                // else if (component.startsWith('Sta')) {\r\n                //     require(['../views/sta/' + component + '.vue'], resolve);\r\n                // } \r\n                else if (component.startsWith('Sys')) {\r\n                    require(['../views/sys/' + component + '.vue'], resolve);\r\n                }\r\n            }\r\n        }\r\n        fmtRoutes.push(fmRouter)\r\n    });\r\n    return fmtRoutes;\r\n}"]}]}